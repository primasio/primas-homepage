<script type="text/javascript" src="https://yb-public.oss-cn-shanghai.aliyuncs.com/primas/lib/processing.min.js"></script>
<script type="text/javascript">
    var processingCode = 'ArrayList<Planet> allPlanets = new ArrayList<Planet>();boolean drawFill = false;float globalHue = 0;class Planet {  ArrayList<Planet> satellites = new ArrayList<Planet>();  Planet parent;  PVector pos = new PVector();  float size = 0;  float sizeRate = 0;  float angle = 0;  float angleRate = 0.1;  boolean reverseAngleRate = false;  color mainColor = color(0, 0, 0, 0);  Planet(float sizeInput) {    this.size = sizeInput;  }  void draw() {        if (drawFill) {      fill(this.mainColor);      noStroke();    } else {      stroke(this.mainColor);      noFill();    }    pushMatrix();        ArrayList<Planet> planetHierarchy = new ArrayList<Planet>();    Planet parentPlanet = this.parent;    while (parentPlanet != null) {      planetHierarchy.add(0, parentPlanet);      parentPlanet = parentPlanet.parent;    }        for (Planet planet : planetHierarchy) {      rotate(planet.angle);      translate(planet.pos.x, planet.pos.y);    }        if (this.parent != null) {      this.pos.x = (this.size + this.parent.size) / 1.5;    }    rotate(this.angle);    translate(this.pos.x, this.pos.y);    line(-this.size, -this.size, this.size, this.size);    popMatrix();    if (this.parent != null) {      if (this.reverseAngleRate) {        this.angle -= this.angleRate;      } else {        this.angle += this.angleRate;      }    }    if (this.sizeRate != 0) {      this.size -= this.sizeRate;    }  }  ArrayList<Planet> addSatellites(int planetCount) {    ArrayList<Planet> newSatellites = new ArrayList<Planet>();    float newSize = 100;    float newSizeRate = random(0.01, 0.2);    color newColor = color(globalHue, 255, 255, 20);    globalHue += 10;    if (globalHue > 255) {      globalHue = 0;    }    float newAngleRate = 0.025;    boolean newReverseAngleRate = false;    if (int(random(2)) == 1) {      newReverseAngleRate = true;    }    for (int i = 0; i < planetCount; i++) {      Planet newPlanet = new Planet(newSize);      newPlanet.parent = this;      newPlanet.sizeRate = newSizeRate;      newPlanet.mainColor = newColor;      float startAngle = radians((360/planetCount)*(i+1));      newPlanet.angle = startAngle;      newPlanet.angleRate = newAngleRate;      newPlanet.reverseAngleRate = newReverseAngleRate;      this.satellites.add(newPlanet);      newSatellites.add(newPlanet);    }    return newSatellites;  }}void setup() {  size(window.innerWidth, 600);  ellipseMode(CENTER);  colorMode(HSB, 255);  frameRate(20);  reset();}void draw() {    if (allPlanets.get(0).size <= 100) {    return;  }  for (Planet p : allPlanets) {    p.draw();  }}void reset() {  allPlanets.clear();  background(0);  globalHue = 80;  createSolarSystem(4, 2, 4);}void resizeSketch(containerHeight) {    size(window.innerWidth, containerHeight);    reset();}void createSolarSystem(int nestedCount, int minSatCount, int maxSatCount) {  allPlanets.clear();  Planet masterPlanet = new Planet(200);  masterPlanet.pos.set(width/2, height/2);  masterPlanet.sizeRate = random(0.1, 0.25);  masterPlanet.mainColor = color(255, 255, 255, 0);  ArrayList<Planet> newPlanets = new ArrayList<Planet>();  newPlanets.add(masterPlanet);  for (int i = 0; i < nestedCount; i++) {    ArrayList<Planet> tempSatellites = new ArrayList<Planet>();    for (Planet p : newPlanets) {      int satelliteCount = int( random(minSatCount, maxSatCount) );      if (satelliteCount == 0) {        continue;      }      ArrayList<Planet> satellites = p.addSatellites(satelliteCount);      tempSatellites.addAll(satellites);    }    allPlanets.addAll(newPlanets);    newPlanets.clear();    newPlanets = tempSatellites;  }}';
    jsCode = Processing.compile(processingCode).sourceCode;
    document.write(jsCode);
</script>
